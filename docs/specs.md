# Amazon・楽天セール通知サービス - 拡張版プロジェクト仕様書

## 1. プロジェクト概要

### 1.1 目的
- Amazon・楽天の商品価格を自動で追跡し、大幅値下げ時に通知するサービスを構築する
- 複数のプラットフォーム（Web、Twitter）で通知を提供する
- アフィリエイトリンク経由の売上でマネタイズする
- 長期的な価格データを活用した高付加価値情報を提供する

### 1.2 目標収益
- 初期: 日500円（月15,000円）
- 半年後: 月30,000円
- 1年後: 月100,000円

### 1.3 予算
- 初期開発: 無料（既存の無料サービスを最大限活用）
- 運用コスト: 月1,000円以内
- 収益が月1,000円に達するまで追加投資を最小限に抑える

## 2. システム構成

### 2.1 全体アーキテクチャ
1. **情報収集システム**: Python スクリプト
2. **データベース**: SQLite（初期）/ PostgreSQL（拡張時）
3. **Webサイト**: Hugo + GitHub Pages
4. **通知システム**: Twitter Bot（主要通知チャネル）

### 2.2 システム連携図
```
情報収集システム（Python）
  │
  ├── データベース（SQLite/PostgreSQL）
  │     │
  │     ├── Webサイト（Hugo）──→ GitHub Pages ──→ ユーザー
  │     │
  │     └── Twitter Bot ───────→ Twitter ───────→ ユーザー
```

## 3. 各コンポーネントの仕様

### 3.1 情報収集システム（Python）

#### 3.1.1 機能
- Amazon・楽天の商品ページをスクレイピングして価格を取得
- 通常価格と比較して値下げ率を計算
- 設定した閾値（デフォルト20%）以上の値下げを検出して通知
- 商品情報と価格履歴をデータベースに保存
- 長期的な価格推移を分析し「買い時スコア」を算出

#### 3.1.2 価格比較ロジック（拡張版）
- **絶対的比較**: 設定された通常価格との比較
- **相対的比較**: 過去1週間・1ヶ月・3ヶ月・1年の最安値との比較
- **季節比較**: 昨年同時期の価格との比較
- **類似商品比較**: 同カテゴリー内での相対的な価格優位性

#### 3.1.3 実装詳細
- **使用技術**: Python 3.13+, BeautifulSoup4, Requests, Pandas, SQLAlchemy
- **スクレイピング間隔**: 3時間ごと（サーバー負荷と規約に配慮）
- **対象商品管理**: データベースで管理
- **デプロイ方法**: GitHub ActionsまたはPythonAnywhere

### 3.2 データベース（拡張）

#### 3.2.1 データモデル
- **商品テーブル**: 商品ID、名前、URL、カテゴリ、通常価格、最終更新日時
- **価格履歴テーブル**: 商品ID、取得日時、価格、割引率
- **通知履歴テーブル**: 通知ID、商品ID、通知日時、価格、割引率、通知内容、通知状態

#### 3.2.2 実装詳細
- **初期フェーズ**: SQLite（シンプルで導入コスト低）
- **拡張フェーズ**: PostgreSQL（高度な分析クエリ対応）
- **バックアップ**: 日次自動バックアップ

### 3.3 Webサイト（Hugo）

#### 3.3.1 機能
- セール情報の一覧表示
- カテゴリ別・サイト別の絞り込み
- 「買い時スコア」の可視化（グラフ表示）
- 過去の価格推移グラフ表示
- 将来の価格予測情報（可能であれば）

#### 3.3.2 実装詳細
- **使用技術**: Hugo, GitHub Pages, Chart.js（グラフ表示）
- **テーマ**: PaperMod（カスタマイズ）
- **コンテンツ更新**: GitHub Actionsで自動化
- **SEO対策**: メタタグ最適化、構造化データ

### 3.4 Twitter Bot

#### 3.4.1 機能
- セール情報の自動ツイート
- 「買い時スコア」を含んだ付加価値情報の提供
- 定期的な宣伝ツイート
- ユーザーからのリプライに対応

#### 3.4.2 実装詳細
- **使用技術**: Python, Tweepy
- **ツイート頻度**: 
  - セール発見時: リアルタイム
  - 定期ツイート: 10時、15時、20時
- **ツイート内容**: 商品名、現在価格、割引率、買い時スコア、アフィリエイトリンク

## 4. 収益化戦略（詳細版）

### 4.1 アフィリエイトプログラム最適化
- **Amazon**: Amazonアソシエイト（紹介料率3〜10%）
  - 高単価・高マージン商品の優先表示
  - Amazonタイムセールとの連携強化
- **楽天**: 楽天アフィリエイト（紹介料率1〜5%）
  - 楽天スーパーセール情報の先行提供
  - 楽天ポイント還元率情報の追加
- **A8.net**: 高単価案件に特化
  - サブスクリプションサービス紹介（継続報酬型）
  - 金融・保険商品など高単価案件

### 4.2 具体的な収益試算
- **Amazonアフィリエイト**: 
  - 平均単価10,000円 × 成約率2% × 紹介料3% × クリック100回/日 = 60円/日
- **楽天アフィリエイト**: 
  - 平均単価8,000円 × 成約率3% × 紹介料4% × クリック80回/日 = 76.8円/日
- **A8.net特定案件**: 
  - 成約単価1,500円 × 成約率1% × クリック25回/日 = 375円/日
- **合計**: 約511.8円/日（月15,354円）

### 4.3 収益向上施策
- **買い時スコアによる信頼性向上**: 成約率を0.5%向上させる効果
- **季節商品の先行情報提供**: 高単価季節商品（エアコンなど）での収益増
- **限定セール情報の早期提供**: タイムセール開始直後の通知による競合差別化
- **ターゲットユーザー拡大**: Twitter フォロワー増加策（ハッシュタグ最適化、相互フォロー）

## 5. データ活用戦略

### 5.1 「買い時スコア」アルゴリズム
- 過去の最安値との比較（配点40%）
- 季節変動パターンとの一致度（配点30%）
- 将来値下げ予測との関連性（配点20%）
- 類似商品との価格比較（配点10%）

### 5.2 価格予測モデル（将来拡張）
- 過去の価格変動パターンを機械学習で分析
- 季節性・イベント（Prime Day等）を考慮した予測
- 「〇日待つと△円下がる可能性が高い」などの情報提供

### 5.3 データ資産の蓄積方針
- 最低1年分のデータを維持
- 10,000商品以上のデータを目標
- カテゴリ別の価格変動パターンの分析

## 6. フォルダ・ファイル構造

```
deal-tracker/
├── .github/
│   └── workflows/
│       ├── docs.yml              # GitHub Pagesのデプロイ設定
│       └── hugo.yml              # Hugoサイトのデプロイ設定
├── docs/
│   ├── _config.yml              # GitHub Pages設定
│   ├── index.md                 # ドキュメントトップページ
│   ├── specs.md                 # 設計書
│   ├── progress.md              # 進捗管理
│   └── structure.md             # プロジェクト構造
├── scraper/
│   ├── __pycache__/             # Pythonキャッシュ
│   ├── requirements.txt         # Pythonパッケージ依存関係
│   ├── scraper.py               # スクレイピングメインコード
│   ├── twitter_bot.py           # Twitter連携コード
│   ├── db_models.py             # データベースモデル
│   ├── utils.py                 # ユーティリティ関数
│   └── config.py                # 設定ファイル
├── database/                    # データベース関連
│   └── deal_tracker.db          # SQLiteデータベースファイル
├── debug/                       # デバッグ用ファイル
│   └── amazon_debug_*.html      # デバッグ用HTMLファイル
├── website/                     # Hugoウェブサイト
│   ├── archetypes/
│   ├── config.yaml              # サイト設定
│   ├── content/
│   │   ├── _index.md            # トップページ
│   │   ├── about.md             # サ